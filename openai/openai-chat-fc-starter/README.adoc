

=== Setup

1. Create a virtual environment (optional)
+
[source,shell]
----
python -m venv .venv
source .venv/bin/activate
----

2. Upgrade pip and install the package
+
[source,shell]
----
pip install --upgrade pip
pip install .
----

=== Running

. Set environment variables
+
[source,shell]
.Ollama example
----
OPENAI_BASE_URL="http://xxx.xxx.xxx.xxx:11434/v1/"
MODEL="llama3.2"
OPENAI_API_KEY="ollama"
export OPENAI_BASE_URL MODEL OPENAI_API_KEY
----
+
See: https://docs.ollama.com/api/openai-compatibility[API Reference > OpenAI compatibility | ollama.com]

. Load local environment variables (if you use a `.env` file)
+
[source,shell]
----
. .env
----

. Run the script

** openai_chat_starter_sync.py
+
[source,shell]
----
python ./src/openai_chat_fc_sync.py 
----
+
[source,console]
.Results
----
$ python src/openai_chat_fc_sync.py 
Model: llama3.2

Request[1]:
message: {'role': 'system', 'content': 'You are an assistant who prefers concise answers, typically one sentence.'}
message: {'role': 'user', 'content': 'Please tell me the product name and price that corresponds to product ID 7.'}

Response(16.5[s], 2.54 [token/s]): id=chatcmpl-771
choice[0]: finish_reason=tool_calls, role=assistant, function_call=None, refusal=None, tool_calls=[ChatCompletionMessageFunctionToolCall(id='call_xxxxxxxx', function=Function(arguments='{"product_id":"7"}', name='get_product_name_by_id'), type='function', index=0), ChatCompletionMessageFunctionToolCall(id='call_yyyyyyyy', function=Function(arguments='{"product_id":"7"}', name='get_product_price_by_id'), type='function', index=1)]:
arguments={'product_id': '7'} → arguments_converted={'product_id': 7}
arguments={'product_id': '7'} → arguments_converted={'product_id': 7}
tool_caller=[
  {
    "index": 0,
    "type": "function",
    "id": "call_xxxxxxxx",
    "function": {
      "name": "get_product_name_by_id",
      "arguments": "{\"product_id\": 7}"
    }
  },
  {
    "index": 1,
    "type": "function",
    "id": "call_yyyyyyyy",
    "function": {
      "name": "get_product_price_by_id",
      "arguments": "{\"product_id\": 7}"
    }
  }
]

Request[2]:
message: {'role': 'system', 'content': 'You are an assistant who prefers concise answers, typically one sentence.'}
message: {'role': 'user', 'content': 'Please tell me the product name and price that corresponds to product ID 7.'}
message: {'role': 'assistant', 'content': '', 'tool_calls': [{'index': 0, 'type': 'function', 'id': 'call_xxxxxxxx', 'function': {'name': 'get_product_name_by_id', 'arguments': '{"product_id": 7}'}}, {'index': 1, 'type': 'function', 'id': 'call_yyyyyyyy', 'function': {'name': 'get_product_price_by_id', 'arguments': '{"product_id": 7}'}}]}
message: {'role': 'tool', 'tool_call_id': 'call_xxxxxxxx', 'name': 'get_product_name_by_id', 'content': '{"product_name": "pineapple"}'}
message: {'role': 'tool', 'tool_call_id': 'call_yyyyyyyy', 'name': 'get_product_price_by_id', 'content': '{"product_name": "80 yen"}'}

Response(10.4[s], 1.82 [token/s]): id=chatcmpl-184
choice[0]: finish_reason=stop, role=assistant, function_call=None, refusal=None, tool_calls=None:
The product name corresponding to ID 7 is "pineapple" or "80 yen".

INFO: A stop notification has been detected. Chat will end.
----